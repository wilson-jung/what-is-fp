### Reducer: 값을 축약, 접기 (낮은 차원으로 만들기, flatten)

```js
const nums = [1,2,3,4,5]

let total = 0
for (const n of nums) {
  total += n
}
console.log(total)
```

```js
const reduce = (f, acc, iter) => {
  for (const n of iter) {
    acc = f(acc, n)
  }
  return acc
}

const add = (a, b) => a + b
console.log(reduce(add, 0, nums))
```

#### 초기값을 설정해보자
```js
const nums = [1,2,3,4,5]
const reduce = (f, acc, iter) => {
  if (!iter) {
    const temp = acc[0];
    iter = acc.slice(1);
    acc = temp;
  }

  for (const n of iter) {
    acc = f(acc, n);
  }
  return acc;
}

const add = (a, b) => a + b
console.log(reduce(add, nums))
```

조금 재미있는 다른 스타일로 작성해 보자
```js
const nums = [1,2,3,4,5]
const reduce = (f, acc, iter) => {
  if (!iter) {
    iter = acc[Symbol.iterator]()
    acc = iter.next().value
  }

  for (const n of iter) {
    acc = f(acc, n);
  }
  return acc;
}

const add = (a, b) => a + b
console.log(reduce(add, nums))
```

#### 좀 더 복잡한 데이터를 다뤄보자
```js
const products = [
  { name: 'a', price: 1000},
  { name: 'b', price: 1100},
  { name: 'c', price: 1010},
  { name: 'd', price: 1001},
]
const reduce = (f, acc, iter) => {
  if (!iter) {
    iter = acc[Symbol.iterator]()
    acc = iter.next().value
  }

  for (const n of iter) {
    acc = f(acc, n);
  }
  return acc;
}
```
#### producs의 모든 금액을 더해보자
```js
console.log(
  reduce(
    (total, product) => total + product.price,
    0,
    products))
```